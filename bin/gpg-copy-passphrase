#!/usr/bin/bash

set -eo pipefail

# --sensitive is only available if wl-clipboard is built from source
if op read "op://Private/GPG Key/password" | tr -d '\n' | wl-copy --sensitive; then
  notify-send -u low "GPG Key" "Passphrase copied to clipboard."
else
  notify-send -u critical "GPG Key" "Failed to copy passphrase."
  exit 1
fi
